# 🚀 飘叔 Agent 使用指南

## 📋 启动步骤（简单3步）

### 步骤 1：启动服务器

**双击运行：**
```
启动服务器.bat
```

这个脚本会自动完成：
- ✅ 安装依赖（如果需要）
- ✅ 生成 Prisma Client
- ✅ 初始化数据库
- ✅ 启动开发服务器

**等待看到：**
```
✓ Ready in XXXms
○ Local:        http://localhost:3000
```

⚠️ **保持这个窗口运行！不要关闭！**

---

### 步骤 2：初始化数据

**方法 A：浏览器（推荐）⭐⭐⭐⭐⭐**

在浏览器中打开：
```
http://localhost:3000/api/seed
```

**方法 B：运行脚本**

双击运行：
```
初始化数据.bat
```

**看到成功消息：**
```json
{
  "success": true,
  "message": "Successfully seeded 6 articles"
}
```

---

### 步骤 3：开始使用

在浏览器中打开：
```
http://localhost:3000
```

---

## 🎯 功能展示

### 1. 主页面 (http://localhost:3000)

#### 📱 推荐流
- 个性化推荐文章
- 基于你的阅读行为
- 智能排序算法

#### 📚 文章列表
- 浏览所有文章（6篇示例）
- 搜索功能
- 分类筛选
- 点击查看详情

#### 💬 AI 对话
- 智能问答
- 基于文章内容回答
- 显示思考过程
- 推荐相关文章

**试试这些问题：**
- "介绍一下飘叔"
- "推荐一些技术文章"
- "什么是飘叔 Agent？"
- "有哪些有趣的文章？"

---

### 2. 演示页面 (http://localhost:3000/demo)

展示所有业务组件：

#### 📊 统计概览
- 文章总数
- 用户总数
- 对话总数
- 推荐总数

#### 📝 文章管理
- 文章列表
- 搜索和筛选
- 查看详情
- 阅读追踪

#### 💬 聊天界面
- 多轮对话
- 流式输出
- 思考过程展示
- 相关文章推荐

#### 👤 用户画像
- 用户等级
- 阅读统计
- 兴趣分布
- 活跃度分析

#### 🎯 推荐面板
- 个性化推荐
- 推荐理由
- 点击追踪

#### 🕸️ 知识图谱
- 实体关系可视化
- 交互式图表
- 知识网络

---

## 🧪 测试 Agent 功能

### 1. 智能问答
1. 打开主页面
2. 点击"对话"标签
3. 输入："介绍一下飘叔"
4. 观察 AI 的回答
5. 查看"思考过程"
6. 点击"相关文章"标签

### 2. 个性化推荐
1. 在"文章列表"中浏览文章
2. 点击几篇文章查看详情
3. 点赞一些文章
4. 返回"推荐流"
5. 观察推荐结果的变化

### 3. 行为追踪
1. 阅读文章（停留时间会被记录）
2. 点赞文章
3. 分享文章
4. 在演示页面查看用户画像
5. 观察兴趣分布的变化

### 4. 知识图谱
1. 打开演示页面
2. 滚动到知识图谱部分
3. 查看实体和关系
4. 点击节点查看详情

---

## 📊 Agent 核心能力展示

### 🧠 RAG（检索增强生成）
- **工作原理**：
  1. 用户提问
  2. 系统检索相关文章
  3. LLM 基于文章内容生成回答
  4. 返回答案 + 相关文章

- **测试方法**：
  - 问："飘叔是谁？"
  - 观察系统如何检索和回答

### 🎯 个性化推荐
- **算法特点**：
  - 兴趣匹配（40%）
  - 热度分析（30%）
  - 时效性（20%）
  - 难度适配（10%）

- **测试方法**：
  - 多次阅读某个分类的文章
  - 观察推荐流的变化

### 📈 行为追踪
- **追踪内容**：
  - 浏览（view）
  - 点赞（like）
  - 分享（share）
  - 收藏（bookmark）
  - 点击（click）
  - 阅读时长
  - 滚动深度

- **测试方法**：
  - 在演示页面查看用户统计
  - 观察数据实时更新

### 🕸️ 知识图谱
- **功能**：
  - 实体识别
  - 关系建立
  - 图谱可视化

- **测试方法**：
  - 查看知识图谱组件
  - 观察实体间的关系

---

## 🔧 API 测试

### 使用 PowerShell 测试

#### 1. 获取文章列表
```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/articles" -Method Get | ConvertTo-Json -Depth 10
```

#### 2. 搜索文章
```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/articles/search?q=飘叔" -Method Get | ConvertTo-Json -Depth 10
```

#### 3. 获取推荐
```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/recommendations?userId=anonymous&limit=5" -Method Get | ConvertTo-Json -Depth 10
```

#### 4. 发送消息
```powershell
$body = @{
    message = "介绍一下飘叔"
    userId = "anonymous"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/api/chat" -Method Post -Body $body -ContentType "application/json" | ConvertTo-Json -Depth 10
```

#### 5. 记录行为
```powershell
$body = @{
    userId = "anonymous"
    articleId = "article-1"
    interactionType = "view"
    duration = 120
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/api/behavior/track" -Method Post -Body $body -ContentType "application/json" | ConvertTo-Json -Depth 10
```

### 使用测试脚本

运行完整的 API 测试：
```powershell
.\test-apis.ps1
```

预期结果：**15/15 测试通过** ✅

---

## 🎨 界面特点

### 响应式设计
- ✅ 桌面端优化
- ✅ 移动端适配
- ✅ 平板端支持

### 现代化 UI
- ✅ shadcn/ui 组件库
- ✅ Tailwind CSS 样式
- ✅ Framer Motion 动画
- ✅ 深色模式支持

### 用户体验
- ✅ 流畅的页面切换
- ✅ 实时数据更新
- ✅ 友好的错误提示
- ✅ 加载状态反馈

---

## 🐛 常见问题

### Q1: 服务器启动失败
**解决方法：**
1. 检查 Node.js 版本（需要 18+）
2. 删除 `node_modules` 文件夹
3. 重新运行 `启动服务器.bat`

### Q2: 端口 3000 被占用
**解决方法：**
```bash
# 使用其他端口
npm run dev -- -p 3001
# 然后访问 http://localhost:3001
```

### Q3: 数据初始化失败
**解决方法：**
1. 确认服务器正在运行
2. 重新访问 http://localhost:3000/api/seed
3. 查看终端错误信息

### Q4: AI 对话无响应
**解决方法：**
1. 检查 `.env.local` 文件
2. 确认 `Z_AI_API_KEY` 已配置
3. 查看浏览器控制台错误

### Q5: 页面空白
**解决方法：**
1. 按 F12 打开开发者工具
2. 查看 Console 标签的错误
3. 查看 Network 标签的请求
4. 确认服务器正在运行

---

## 📈 性能优化

### 已实现的优化
- ✅ 数据缓存（StatsCache）
- ✅ 懒加载组件
- ✅ 图片优化（Next.js Image）
- ✅ 代码分割
- ✅ 服务端渲染（SSR）

### 可选优化
- ⏳ Redis 缓存
- ⏳ CDN 加速
- ⏳ 数据库索引优化
- ⏳ 向量数据库（Milvus）

---

## 🚀 下一步

### 立即体验
1. ✅ 启动服务器
2. ✅ 初始化数据
3. ✅ 浏览文章
4. ✅ 与 AI 对话
5. ✅ 查看推荐
6. ✅ 探索演示页面

### 深入了解
1. 📖 阅读 `PIAOSHU_AGENT_SUMMARY.md`
2. 📖 查看 `FEATURE_CHECKLIST.md`
3. 📖 浏览 `src/components/README.md`

### 自定义开发
1. 🔧 修改主题样式
2. 🔧 添加新组件
3. 🔧 扩展 API
4. 🔧 优化算法

---

## 💡 使用技巧

### 提高推荐准确度
- 多浏览不同分类的文章
- 点赞感兴趣的内容
- 增加阅读时长
- 定期使用系统

### 获得更好的 AI 回答
- 提问要具体明确
- 使用文章中的关键词
- 尝试多轮对话
- 查看相关文章

### 探索知识图谱
- 点击不同的实体节点
- 观察实体间的关系
- 理解知识网络结构

---

## 🎉 开始使用

**所有准备工作已完成！**

现在：
1. 双击 `启动服务器.bat`
2. 等待服务器启动
3. 访问 http://localhost:3000/api/seed 初始化数据
4. 访问 http://localhost:3000 开始使用

**祝你使用愉快！** 🚀

---

## 📞 技术支持

如有问题，请查看：
- `故障排除.md` - 常见问题解决
- `QUICK_START.md` - 快速启动指南
- `PIAOSHU_AGENT_SUMMARY.md` - 项目总结

---

**飘叔 Agent - 你的智能知识助手** 🤖✨
