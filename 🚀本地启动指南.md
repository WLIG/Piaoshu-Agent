# 🚀 本地启动指南

## 快速启动

### 方法 1: 使用批处理文件（推荐）

双击运行：
```
start-local.bat
```

或在命令提示符中：
```cmd
start-local.bat
```

### 方法 2: 手动命令

打开命令提示符（CMD），执行：

```cmd
npm run dev
```

### 方法 3: PowerShell

打开 PowerShell，执行：

```powershell
npm run dev
```

---

## 📋 启动前检查

### 1. 环境变量文件

确保 `.env.local` 文件存在并包含：

```env
# 数据库
DATABASE_URL="your_database_url"

# AI 模型 API
OPENROUTER_API_KEY="your_key"
NVIDIA_API_KEY="your_key"
DEEPSEEK_API_KEY="your_key"

# 环境
NODE_ENV="development"
```

### 2. 依赖已安装

如果是第一次运行，先安装依赖：

```cmd
npm install
```

### 3. Prisma 客户端

生成 Prisma 客户端：

```cmd
npx prisma generate
```

### 4. 数据库初始化

初始化数据库：

```cmd
npx prisma db push
```

---

## ✅ 启动成功标志

看到以下输出表示启动成功：

```
  ▲ Next.js 15.x.x
  - Local:        http://localhost:3000
  - Network:      http://192.168.x.x:3000

 ✓ Starting...
 ✓ Ready in Xs
```

---

## 🌐 访问应用

启动成功后，在浏览器中访问：

### 主要页面
- http://localhost:3000 - 主页
- http://localhost:3000/simple - 简化版
- http://localhost:3000/complete - 完整版
- http://localhost:3000/demo - 演示版

### 测试页面
- http://localhost:3000/test-api - API 测试
- http://localhost:3000/chat-test - 聊天测试
- http://localhost:3000/media-test - 媒体测试

---

## 🧪 测试功能

### 基础测试

1. **打开简化版页面**
   ```
   http://localhost:3000/simple
   ```

2. **输入测试消息**
   ```
   你好，请介绍一下你自己
   ```

3. **点击发送**
   - 应该看到加载状态
   - 应该收到 AI 回复

4. **检查控制台**
   - 按 F12 打开开发者工具
   - 查看 Console 标签
   - 不应该有严重错误

### API 测试

访问测试页面：
```
http://localhost:3000/test-api
```

点击"测试 API"按钮，应该看到响应结果。

---

## ⚠️ 常见问题

### 问题 1: 端口被占用

**错误信息:**
```
Error: listen EADDRINUSE: address already in use :::3000
```

**解决方案:**
```cmd
# 查找占用端口的进程
netstat -ano | findstr :3000

# 结束进程（替换 PID）
taskkill /PID <PID> /F

# 或者使用其他端口
npm run dev -- -p 3001
```

### 问题 2: 依赖缺失

**错误信息:**
```
Cannot find module 'xxx'
```

**解决方案:**
```cmd
# 重新安装依赖
npm install
```

### 问题 3: Prisma 错误

**错误信息:**
```
PrismaClient is unable to run in the browser
```

**解决方案:**
```cmd
# 重新生成 Prisma 客户端
npx prisma generate
```

### 问题 4: 环境变量未加载

**错误信息:**
```
API key is not defined
```

**解决方案:**
1. 检查 `.env.local` 文件是否存在
2. 确认环境变量名称正确
3. 重启开发服务器

---

## 🔧 调试技巧

### 查看详细日志

```cmd
# 设置调试模式
set DEBUG=* && npm run dev
```

### 清理缓存

```cmd
# 删除 .next 目录
rmdir /s /q .next

# 重新启动
npm run dev
```

### 检查数据库连接

```cmd
# 打开 Prisma Studio
npx prisma studio
```

---

## 📊 性能监控

### 开发工具

1. **React DevTools**
   - 安装浏览器扩展
   - 查看组件树
   - 监控性能

2. **Network 标签**
   - 查看 API 请求
   - 检查响应时间
   - 分析加载性能

3. **Console 标签**
   - 查看日志输出
   - 检查错误信息
   - 调试代码

---

## ✅ 测试清单

启动后，按照 `本地功能测试清单.md` 进行完整测试：

- [ ] 服务器成功启动
- [ ] 可以访问主页
- [ ] 聊天功能正常
- [ ] API 调用有响应
- [ ] 模型选择可用
- [ ] 没有严重错误

---

## 🚀 下一步

测试完成后：

1. **修复发现的问题**
2. **确认所有功能正常**
3. **提交代码到 Git**
4. **推送到 GitHub**
5. **配置 Vercel 环境变量**
6. **验证线上部署**

---

## 📞 需要帮助？

如果遇到问题：

1. 查看终端错误信息
2. 检查浏览器控制台
3. 参考 `本地功能测试清单.md`
4. 查看 `.env.local` 配置

---

**祝测试顺利！** 🎉
