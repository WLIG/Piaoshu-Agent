# 本地功能测试清单

## 🎯 测试目标

在本地完整测试所有功能，确认无误后再同步到 Vercel。

---

## 📋 测试清单

### 1. 环境准备 ✅

- [ ] `.env.local` 文件已创建
- [ ] 所有环境变量已配置
  - [ ] `DATABASE_URL`
  - [ ] `OPENROUTER_API_KEY`
  - [ ] `NVIDIA_API_KEY`
  - [ ] `DEEPSEEK_API_KEY` (可选)
- [ ] 依赖已安装 (`npm install`)
- [ ] Prisma 客户端已生成
- [ ] 数据库已初始化

### 2. 服务器启动 🚀

- [ ] 开发服务器成功启动
- [ ] 没有启动错误
- [ ] 可以访问 http://localhost:3000
- [ ] 控制台没有严重错误

### 3. 页面访问测试 📄

#### 主要页面
- [ ] `/` - 主页加载正常
- [ ] `/simple` - 简化版页面正常
- [ ] `/complete` - 完整版页面正常
- [ ] `/demo` - 演示版页面正常
- [ ] `/minimal` - 最小化版页面正常

#### 测试页面
- [ ] `/test-api` - API 测试页面正常
- [ ] `/chat-test` - 聊天测试页面正常
- [ ] `/media-test` - 媒体测试页面正常

#### 功能页面
- [ ] `/admin` - 管理页面正常
- [ ] `/upload` - 上传页面正常
- [ ] `/upload/book` - 书籍上传页面正常

### 4. 基础聊天功能 💬

#### 简化版 (/simple)
- [ ] 可以输入消息
- [ ] 点击发送按钮有响应
- [ ] 显示加载状态
- [ ] 收到 AI 回复
- [ ] 回复内容正确显示
- [ ] 错误处理正常

#### 完整版 (/complete)
- [ ] 所有简化版功能正常
- [ ] Plus 按钮可以点击
- [ ] 多功能菜单显示正常
- [ ] 可以切换不同功能

### 5. API 端点测试 🔌

#### 基础 API
- [ ] `/api/chat` - 聊天 API 响应正常
- [ ] `/api/chat-simple` - 简化聊天 API 正常
- [ ] `/api/chat-enhanced` - 增强聊天 API 正常
- [ ] `/api/test-llm` - LLM 测试 API 正常

#### NVIDIA API
- [ ] `/api/nvidia/chat` - NVIDIA 聊天 API 正常
- [ ] 可以选择不同模型
- [ ] 模型切换正常工作

#### 上传 API
- [ ] `/api/upload/media` - 媒体上传 API 正常
- [ ] `/api/upload/book` - 书籍上传 API 正常
- [ ] `/api/upload/parse` - 文档解析 API 正常

#### 分析 API
- [ ] `/api/analyze/image` - 图片分析 API 正常
- [ ] `/api/analyze/document` - 文档分析 API 正常
- [ ] `/api/analyze/video` - 视频分析 API 正常

### 6. 多模态功能 🎤🖼️

#### 语音输入
- [ ] 语音输入按钮显示
- [ ] 点击开始录音
- [ ] 录音状态显示正常
- [ ] 语音转文字功能正常
- [ ] 转换结果正确

#### 图片上传
- [ ] 可以选择图片文件
- [ ] 图片预览显示正常
- [ ] 上传进度显示
- [ ] 上传成功
- [ ] 图片分析结果正确

#### 文档上传
- [ ] 可以选择文档文件
- [ ] 支持多种格式 (txt, md, docx, pdf)
- [ ] 文档解析正常
- [ ] 解析结果正确显示

### 7. 数据库功能 💾

#### 对话历史
- [ ] 对话可以保存
- [ ] 可以查询历史对话
- [ ] 历史记录显示正确
- [ ] 可以删除对话

#### 用户数据
- [ ] 用户信息可以保存
- [ ] 用户偏好记录正常
- [ ] 数据持久化正常

#### 知识库
- [ ] 文章可以保存
- [ ] 可以查询文章
- [ ] 文章内容正确
- [ ] 可以更新和删除

### 8. 高级功能 🚀

#### Skills 系统
- [ ] Skills 系统加载正常
- [ ] 可以调用专业分析
- [ ] 分析结果正确

#### 个性化学习
- [ ] 个性化功能正常
- [ ] 可以记住用户偏好
- [ ] 推荐内容相关

#### 记忆系统
- [ ] 长期记忆功能正常
- [ ] 可以跨会话记忆
- [ ] 记忆检索正确

### 9. 错误处理 ⚠️

- [ ] API 错误有友好提示
- [ ] 网络错误处理正常
- [ ] 超时错误提示清晰
- [ ] 无效输入有验证
- [ ] 错误不会导致崩溃

### 10. 性能测试 ⚡

- [ ] 页面加载速度快 (< 3秒)
- [ ] API 响应及时 (< 5秒)
- [ ] 没有明显卡顿
- [ ] 内存使用正常
- [ ] 没有内存泄漏

---

## 🔧 测试工具

### 自动化测试脚本

```bash
# 测试所有 API
node test-all-apis.js

# 测试聊天功能
node test-skills-chat.js

# 测试完整系统
node test-complete-system.js

# 测试图片分析
node test-image-analysis.js

# 测试语音输入
node test-voice-input.js
```

### 手动测试步骤

1. **启动服务器**
   ```bash
   npm run dev
   ```

2. **打开浏览器**
   访问 http://localhost:3000

3. **逐项测试**
   按照清单逐项测试功能

4. **记录问题**
   发现问题立即记录

5. **修复问题**
   修复后重新测试

---

## 📊 测试结果记录

### 测试环境
- **日期:** ___________
- **Node 版本:** ___________
- **npm 版本:** ___________
- **操作系统:** ___________

### 测试结果

| 功能模块 | 状态 | 备注 |
|---------|------|------|
| 环境准备 | ⬜ | |
| 服务器启动 | ⬜ | |
| 页面访问 | ⬜ | |
| 基础聊天 | ⬜ | |
| API 端点 | ⬜ | |
| 多模态功能 | ⬜ | |
| 数据库功能 | ⬜ | |
| 高级功能 | ⬜ | |
| 错误处理 | ⬜ | |
| 性能测试 | ⬜ | |

**图例:**
- ✅ 通过
- ❌ 失败
- ⚠️ 部分通过
- ⬜ 未测试

### 发现的问题

1. **问题描述:**
   - 位置:
   - 现象:
   - 重现步骤:
   - 解决方案:

2. **问题描述:**
   - 位置:
   - 现象:
   - 重现步骤:
   - 解决方案:

---

## ✅ 测试完成后

### 确认清单

- [ ] 所有核心功能正常
- [ ] 没有严重错误
- [ ] 性能可接受
- [ ] 用户体验良好

### 同步到 GitHub

```bash
# 1. 提交所有更改
git add .
git commit -m "test: Verify all features working locally"

# 2. 推送到 GitHub
git push origin main
```

### 配置 Vercel

1. 进入 Vercel 项目设置
2. 添加所有环境变量
3. 触发重新部署
4. 验证线上功能

---

## 📝 注意事项

1. **环境变量**
   - 确保本地和 Vercel 的环境变量一致
   - 敏感信息不要提交到 Git

2. **数据库**
   - 本地和生产使用不同的数据库
   - 生产数据库需要单独配置

3. **API 密钥**
   - 确保 API 密钥有效
   - 注意 API 调用限额

4. **测试数据**
   - 使用测试数据，不要用真实数据
   - 测试完成后清理测试数据

---

**测试负责人:** ___________
**测试日期:** ___________
**测试状态:** ⬜ 进行中 / ⬜ 已完成
