# 🚀 飘叔 Agent 手动启动指南

## ⚠️ 重要提示

由于自动化脚本在当前环境中遇到问题，请按照以下步骤**手动启动**服务器。

---

## 📋 启动步骤

### 步骤 1：打开 PowerShell

1. 按 `Win + X`
2. 选择 "Windows PowerShell (管理员)"
3. 或者在开始菜单搜索 "PowerShell" 并右键"以管理员身份运行"

### 步骤 2：进入项目目录

```powershell
cd "C:\Users\Administrator\Desktop\Piaoshu  Agent  IP"
```

### 步骤 3：安装依赖

```powershell
npm install
```

**注意**：这一步可能需要 5-10 分钟，请耐心等待。

如果遇到错误，尝试：
```powershell
npm install --legacy-peer-deps
```

### 步骤 4：生成 Prisma Client

```powershell
npx prisma generate
```

### 步骤 5：初始化数据库

```powershell
npx prisma db push
```

### 步骤 6：启动开发服务器

```powershell
npm run dev
```

**等待看到：**
```
✓ Ready in XXXms
○ Local:        http://localhost:3000
```

⚠️ **保持这个 PowerShell 窗口运行！不要关闭！**

---

## 📊 步骤 7：初始化数据

**打开新的 PowerShell 窗口**（不要关闭服务器窗口），运行：

```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/seed" -Method Post
```

或者直接在浏览器中打开：
```
http://localhost:3000/api/seed
```

**看到成功消息：**
```json
{
  "success": true,
  "message": "Successfully seeded 6 articles"
}
```

---

## 🌐 步骤 8：访问系统

在浏览器中打开：

### 主页面
```
http://localhost:3000
```

功能：
- 📱 推荐流
- 📚 文章列表
- 💬 AI 对话

### 演示页面
```
http://localhost:3000/demo
```

功能：
- 📊 统计概览
- 📝 文章管理
- 👤 用户画像
- 🎯 推荐面板
- 🕸️ 知识图谱

---

## 🎯 快速验证

打开主页面后：

1. [ ] 看到三个标签（推荐流、文章列表、对话）
2. [ ] 点击"文章列表"
3. [ ] 看到 6 篇文章
4. [ ] 点击任意文章查看详情
5. [ ] 点击"对话"标签
6. [ ] 输入"介绍一下飘叔"
7. [ ] 看到 AI 回复
8. [ ] 查看"思考过程"和"相关文章"

**8/8 = 完美！** ✅

---

## 🧪 测试 AI 对话

### 推荐问题：
- "介绍一下飘叔"
- "推荐一些技术文章"
- "什么是飘叔 Agent？"
- "有哪些有趣的文章？"
- "飘叔有什么特点？"

---

## 🔧 API 测试（可选）

在新的 PowerShell 窗口中运行：

### 1. 获取文章列表
```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/articles" -Method Get | ConvertTo-Json -Depth 10
```

### 2. 搜索文章
```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/articles/search?q=飘叔" -Method Get | ConvertTo-Json -Depth 10
```

### 3. 获取推荐
```powershell
Invoke-RestMethod -Uri "http://localhost:3000/api/recommendations?userId=anonymous&limit=5" -Method Get | ConvertTo-Json -Depth 10
```

### 4. 发送消息
```powershell
$body = @{
    message = "介绍一下飘叔"
    userId = "anonymous"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/api/chat" -Method Post -Body $body -ContentType "application/json" | ConvertTo-Json -Depth 10
```

### 5. 完整测试
```powershell
.\test-apis.ps1
```

---

## 🐛 常见问题

### Q1: npm install 失败

**解决方法：**
```powershell
# 清理缓存
npm cache clean --force

# 重新安装
npm install --legacy-peer-deps
```

### Q2: 端口 3000 被占用

**解决方法：**
```powershell
# 查找占用端口的进程
netstat -ano | findstr :3000

# 结束进程（替换 PID）
taskkill /PID <进程ID> /F

# 或使用其他端口
npm run dev -- -p 3001
```

### Q3: Prisma 错误

**解决方法：**
```powershell
# 重新生成
npx prisma generate

# 重置数据库
npx prisma db push --force-reset
```

### Q4: 页面空白

**解决方法：**
1. 按 F12 打开开发者工具
2. 查看 Console 标签的错误
3. 查看 Network 标签的请求
4. 确认服务器正在运行

### Q5: AI 对话无响应

**解决方法：**
1. 检查 `.env.local` 文件
2. 确认 `Z_AI_API_KEY` 已配置
3. 查看服务器终端的错误信息

---

## 📈 完成清单

- [ ] 打开 PowerShell
- [ ] 进入项目目录
- [ ] npm install
- [ ] npx prisma generate
- [ ] npx prisma db push
- [ ] npm run dev
- [ ] 初始化数据
- [ ] 访问主页面
- [ ] 测试 AI 对话
- [ ] 浏览文章列表
- [ ] 查看推荐流
- [ ] 访问演示页面

---

## 💡 使用技巧

### 保持服务器运行
- 不要关闭运行 `npm run dev` 的 PowerShell 窗口
- 如果需要运行其他命令，打开新的 PowerShell 窗口

### 查看日志
- 服务器日志会显示在运行 `npm run dev` 的窗口中
- 如果出现错误，查看这个窗口的输出

### 停止服务器
- 在运行 `npm run dev` 的窗口中按 `Ctrl + C`
- 确认停止（输入 Y）

### 重启服务器
- 停止服务器后，再次运行 `npm run dev`

---

## 🎉 开始使用

完成所有步骤后，你就可以：

1. ✅ 浏览文章
2. ✅ 与 AI 对话
3. ✅ 查看推荐
4. ✅ 探索演示页面
5. ✅ 测试 API

**祝你使用愉快！** 🚀

---

## 📞 需要帮助？

查看以下文档：
- `使用指南.md` - 详细使用说明
- `Agent功能展示.md` - 功能演示脚本
- `QUICK_START.md` - 快速启动指南
- `故障排除.md` - 常见问题解决

---

**飘叔 Agent - 你的智能知识助手** 🤖✨
